var background=function(){"use strict";var c,u;function f(e){return e==null||typeof e=="function"?{main:e}:e}const r=(u=(c=globalThis.browser)==null?void 0:c.runtime)!=null&&u.id?globalThis.browser:globalThis.chrome,w=f(()=>{const e=["capital.fr","geo.fr","caminteresse.fr","cuisineactuelle.fr","hbrfrance.fr","voici.fr","femmeactuelle.fr","harpersbazaar.fr","cotemaison.fr","hellocoton.fr","quoi.info","selectionshopping.com"];function l(t){try{const n=new URL(t).hostname.toLowerCase();return e.some(d=>n.includes(d.toLowerCase())||n.includes(d.split(".")[0].toLowerCase()))}catch(o){return console.error("Error parsing URL:",o),!1}}async function s(t,o){l(o)?(await r.action.setBadgeText({text:"✓",tabId:t}),await r.action.setBadgeBackgroundColor({color:"#146C2E",tabId:t}),await r.action.setTitle({title:`OWS Tools - Site supporté
Toutes les fonctionnalités disponibles`,tabId:t})):(await r.action.setBadgeText({text:"!",tabId:t}),await r.action.setBadgeBackgroundColor({color:"#8D5524",tabId:t}),await r.action.setTitle({title:`OWS Tools - Site non supporté
Fonctionnalités limitées`,tabId:t}))}r.tabs.onActivated.addListener(async t=>{const o=await r.tabs.get(t.tabId);o.url&&await s(t.tabId,o.url)}),r.tabs.onUpdated.addListener(async(t,o,n)=>{o.url&&n.url&&await s(t,n.url)}),r.runtime.onStartup.addListener(async()=>{const t=await r.tabs.query({active:!0,currentWindow:!0});t[0]&&t[0].url&&t[0].id&&await s(t[0].id,t[0].url)}),r.runtime.onInstalled.addListener(async()=>{const t=await r.tabs.query({active:!0,currentWindow:!0});t[0]&&t[0].url&&t[0].id&&await s(t[0].id,t[0].url)})});function g(){}function i(e,...l){}const b={debug:(...e)=>i(console.debug,...e),log:(...e)=>i(console.log,...e),warn:(...e)=>i(console.warn,...e),error:(...e)=>i(console.error,...e)};let a;try{a=w.main(),a instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw b.error("The background crashed on startup!"),e}return a}();
background;
